<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Cleaner!</title>
    <title>Concepts In Gaming - Final Project</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DynaPuff:wght@400..700&family=Slackey&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Sam's pages -->
    <!-- Audio Elements (Added here, controlled by script.js) -->
    <audio id="start-music" loop>
        <source src="puzzle-game-bright-casual-video-game-music-249202.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="gameplay-music" loop>
        <source src="game-music-loop-12-147170.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="end-music" loop>
        <source src="chill-music-loop-183100.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <!-- <a href="./screens/endresultScreen.html">end</a>
    <a href="./screens/startscreen.html">start</a> -->

    <div class="startScreen">
      <div class="main-box">
        CLEAN<br>MY<br>DESK?<br><small>(Please!)</small>
      </div>

      <div class="button-group">
        <button id="start">YOU GOT IT!</button>
        <button id="startTrick">FOR FREE?!</button>
      </div>

      <div class="footer-arrow" onclick="handleArrowClick()">
        <!-- If user presses on this, just remove the button entirely and prompt them with an alert saying “Yes” LOL-->
      </div>
    </div>
    <!-- Sam's code end -->


<!-- Gameplay Music -->


    <div class="memorize">
      <div class="timerSlot">
        <p id="memTimer">0:30</p>
      </div>
      <div class="orderContainer">
        <div id="order">
          <h3>REMEMBER!</h3>
          <p id="organizeList"></p>
        </div>
      </div>
      <button class="readyButton">PUT ME IN COACH!</button>
    </div>


    <div class="gamePlay">
      <div class="timerSlot">
        <p class="show showMinus">-5</p>
        <p id="playTimer">1:00</p>
        <p class="show showAdd">+5</p>
      </div>
      <div class="gameObject"></div>
      <div class="gameOption"></div>
    </div>
    

     
    <div class="gameOver">
      <p>Times Up</p>
      <p>GAME OVER!</p>
      
      <!-- Sam's code -->
         <!-- End Screen Music -->


      <div class="result-container">
        <h1 id="result-message">Loading result...</h1>

        <div class="score-box">
          <h2>YOUR SCORE</h2>
          <div id="score-value">0</div>
        </div>

        <button onclick="runAgain()">RUN IT AGAIN!</button>
      </div>


    </div>
  <!-- Sam's code end -->
    
  <!-- Include necessary JS logic to manage music playback -->
    <script>
        // Define ALL music control functions here to ensure they exist on load
        function stopAllMusic() {
            // Check if element exists before trying to pause/reset
            const startMusic = document.getElementById('start-music');
            const gameplayMusic = document.getElementById('gameplay-music');
            const endMusic = document.getElementById('end-music');
            
            if (startMusic) { startMusic.pause(); startMusic.currentTime = 0; }
            if (gameplayMusic) { gameplayMusic.pause(); gameplayMusic.currentTime = 0; }
            if (endMusic) { endMusic.pause(); endMusic.currentTime = 0; }
        }

        // The function linked to your "Start" buttons
        function playStartMusic() {
            stopAllMusic();
            // .play() must be called directly within the user-gesture handler
            document.getElementById('start-music').play().catch(e => console.error("Start music failed:", e));
            // This function effectively "unlocks" audio for the entire page now
        }

        // Function to transition to gameplay music (call this from script.js)
        function playGameplayMusic() {
            stopAllMusic();
            document.getElementById('gameplay-music').play().catch(e => console.error("Gameplay music failed:", e));
        }

        // Function to transition to end screen music (call this from script.js)
        function playEndMusic() {
            stopAllMusic();
            document.getElementById('end-music').play().catch(e => console.error("End music failed:", e));
        }
        
        // Ensure the original functions from your HTML still work if you had them here
        function handleArrowClick() {
            // We call playStartMusic() here too, just in case this is the first click
            playStartMusic(); 
            const arrow = document.querySelector('.footer-arrow');
            if (arrow) arrow.remove();
            alert("Yes");
        }

        function runAgain() {
            stopAllMusic(); // Stop music before redirecting
            window.location.href = "index.html"; 
        }
    </script>
    
    <!-- Main game logic script -->

  <script src="script.js"></script>
</body>
</html>
